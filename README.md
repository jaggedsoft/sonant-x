Sonant-X
========

A very small JavaScript synthesizer library, suitable for small JavaScript demos or video games.

Sonant-X was created with video games' sound effects and music in mind, as well as size-restrained demos. It supports
both the HTML5 Audio object and the Web Audio API.

Songs for Sonant-X can be composed using [Sonant-X Live](https://github.com/nicolas-van/sonant-x-live).

Sonant-X is a fork of js-sonant by Marcus Geelnard.

Usage
-----

### Song Generation

First, you'll want a song in JSON format generated by Sonant-X Live. An example can be found by clicking [here](http://nicolas-van.github.io/sonant-x-live/#N4Igzg9gdg5gMgUyiAXAZgOwBpzRgEQEMAXQ1AbVAjAGMBGAfQhuNWxGvoYBMFWUADDk6NexAK5QEqIR1qMAHkgBuM4fIbKIAG1R0AnACZ1XAO6FlCAGYQATgFtUaE4aYs2LnnzVyarsZLSKOycrkpQqoKeWroohgJ0nuaWNg5OOFAQAJZgCAxWhLy2PioMJKQ0ANZsABz6OKVg4mCkWcgodIZoACwNEQy2CNoIhLl6aABsk33KDPajxAjFHfqJIFYK%2BVnai8vG65tWgwCOqACsNWj1BwMIkFCEUDRBhme9N7zahACeDMRZ9iCExwGy8X1%2BhHs%2FE6a1BAAdHvkTqhgTcEVAylC9N12NobEwNEcEKcoiA8RB8odkR0cOSkcSUbT8ZDofozkyKclrHZHKS4RREsYhEJBVhBQBdHA0CigdrkOhvLAixXKoVinFKzXCrU65W9PWahVqhXYbXK4FmrXigC%2BWFlApVYsdRsNGst7p1Cv1Tu9LuVps9Z3qHoENptdt8jGY%2FBCGjEPhEXgkUgTGnCkVkiZiqFe7MjDC5qV5%2B1Cbn4NU88dJpYCKY6Fd8YRUemiOj0qySFm5aTiGWyuXyhSWJX65UIVSc%2Bn07EazVa7TOUymM1uw1GQToAi3W5X8xaw7iZzzoKs212OZBVIZ6CMl9u90ezxzR7vnx%2BfwBQQboLfEKxKAma54URIkSWPTZ0UxfgJlxfFE1Anw6RPak1iQ6l3jpFlzlgzkuyLdIQH5FB5SwYxRXI0jJRAaViPtYi6DQENdWYpjWJY9jhXDOj5S6Di%2BLYgT%2BKta0uPzaNUAbRMq0zOM%2BECVMuHTBTGGzasNELHkFNccSUEk2h%2FG8NS%2FCTeSjKbCItM0NszILPDNNJTIcjyAoihRWRSjHCcUDOdz%2BiaFpCDaVBugMFdBjXMYUG6CYBBnfo93PDpGLvU8dgPWErxJTc0DQfZQUGB8ng3eJXyGd9%2FkBYLSvBKC9FRYCMQQ7y70grCOgEBs6Xg6lZCQzLEPxJq80w%2F86BqHDbJSezZCI8gPUSOgqJoygQDlbU6DdT0NQ2gMRU2vaAx2rbdtdbAjvW%2Fb1UOnEw1tKgNB02MuGkkxRDkusZMU5saXzVTc1eybu15T7tPcYJK0MkGTI%2BzwlJ%2B0s%2FpfRtAfwhz%2B2codll82ZPOqbzsYYfz5z0HywqGEZIu6GodxAUoEoPeJZBPM8GZS6kYqZzYCugR8XkVD4yt%2BCqgk5sF3za0XIKayXEQljkCS4aX5eQ69esGnr5blsl8Q0nsZoFMVDYWsUlplVaBUupjzqE622NtjjbojRNHoBl781rEWAbhz6VOs%2F78114tPBd5G3Zrd6gmuUtvdbWIvU7Kae32RyBxcg8CdxnMQobWcAqC9qMDzUpwopjcBAmDbdwWBnulF1LEucG4msMfQJjyrm7h5orn3AsWhc%2FRkBZqtq6DodgGvpElG4ntqMEbrrCQ17WKRVrLlepYbmVGwwMJ1uy9ZwWb5tIw3DFN2jzfo51r%2BNS2bev30zmNM4TvNB27sv%2BUH8NJ%2FTqEy144HR%2Fs%2FV%2BTpgwsUdvdLgIcpKQ1dhHZSDAY6%2FWsgYEs6l968jWKWHSqJw78Chh7VAUd9JIO%2BlDVSaCE5AxbKtdGg5XKkg8sQCoeMGJxVmETQK7RGYExLuuYKFc1h02rssKhTcWZiLZtefQNR273i7k%2BXSQFNi%2Fg%2FJVAC1Vxb%2FleC1EC7M9EYlnhNbqqtlb9R%2Bmha888t7QWuHSQOPhZoUWcIkNA58VpygYutZKe1jTJW8a6Mivj1T%2BJ8eEoJhoAkhI2sEi6YSlSiS8bxEUKSxRoHZKk1xaSGLsk6M4EUGTDQ5JKQU9JmSxS8XyVEvJOSilZMSR%2FLx9Tyl%2F0KXklpR1cltNae0mpPTundKAUMq6%2FTQwiQ%2Fs7MGT03oEPgcmT2%2BZkFZj9kjRMjj0DBzBnpYyYdSFEJsss0hiM8ylg2bIFOGNGGdA4WUFh448aGH2LnYmukc79H4ZFK404q77j2EjZmaVljTwsbXGCd5uYPG7nEHoWj%2B4aPeD%2BQWtV0AgoYFLak8jWr%2FhqLvCkpiSRqxXhY1C6trGax0Z1PeidgaHwoOtE%2BLiPHcXiT%2Fb0rKAGOnmt0Z%2B7LImcr5eMiMa0Blcp6etMVADNqANGQK5igCkn0tFYK2VgYVUXUOpK1VrFIFiW2fMxBByfZkIskZX2sRjXnK2eWCGczQ4IMOeQ2OlkrV0KcgwhmSNmGsOxAIHotyuH5yMHQVExdyYCKSj0MevzErxG%2FIcSRF4m6Yp8qLSFvM6pwvUS8LNI8X6GMnhJAtbV4gmMXmY5elJC2WLJSSfYI1%2BBnFJbhGlTilUiiNp2xaUozZeLvoJAd%2F9%2BK3SorYCAphEALibY3JA3AAAK5QljtH0NaIAAA%3D) and choosing "Export JSON" in the menu on the left.

With that JSON song, we will be able to create a `MusicGenerator` object:

    var songGen = new sonantx.MusicGenerator(jsonSong);

Then it depends if you prefer to use the Web Audio API or the HTML5 `Audio` class.

#### Web Audio API

    songGen.createAudioBuffer(function(buffer) {
        var source = audioCtx.createBufferSource();
        source.buffer = buffer;
        source.connect(audioCtx.destination);
        source.start();
    });

Note that the `buffer` object can be stored and re-used any number of times.

#### Audio Class

    songGen.createAudio(function(audio) {
        audio.play();
    });

Note that, like all `Audio` objects, this one is not re-usable. If you want to be able to re-create `Audio` objects with
minimum delay, you can use the following syntax:

    songGen.getAudioGenerator(function(audioGenerator) {
        var audio = audioGenerator.getAudio();
        audio.play();
    });

Here the `audioGenerator` can be used to create any number of `Audio` instances without the need to re-calculate the
whole song. Remember that, even if the song is not re-calculated, each creation of an HTML5 `Audio` object provoke an
impossible to avoid delay in most browsers. It can be as short as 0.1 second but it's still a burden for applications
like video games. This is why using the Web Audio API is recommended.

### Single sounds generation

First, you'll want an instrument description in JSON format generated by Sonant-X Live. To get a example one, you can
first click [here](http://nicolas-van.github.io/sonant-x-live/#N4Igzg9gdg5gMgUyiAXAZgOwBpzRgEQEMAXQ1AbVAjAGMBGAfQhuNWxGvoYBMFWUADDk6NexAK5QEqIR1qMAHkgBuM4fIbKIAG1R0AnACZ1XAO6FlCAGYQATgFtUaE4aYs2LnnzVyarsZLSKOycrkpQqoKeWroohgJ0nuaWNg5OOFAQAJZgCAxWhLy2PioMJKQ0ANZsABz6OKVg4mCkWcgodIZoACwNEQy2CNoIhLl6aABsk33KDPajxAjFHfqJIFYK%2BVnai8vG65tWgwCOqACsNWj1BwMIkFCEUDRBhme9N7zahACeDMRZ9iCExwGy8X1%2BhHs%2FE6a1BAAdHvkTqhgTcEVAylC9N12NobEwNEcEKcoiA8RB8odkR0cOSkcSUbT8ZDofozkyKclrHZHKS4RREsYhEJBVhBQBdHA0CigdrkOhvLAixXKoVinFKzXCrU65W9PWahVqhXYbXK4FmrXigC%2BWFlApVYsdRsNGst7p1Cv1Tu9LuVps9Z3qHoENptdt8jGY%2FBCGjEPhEXgkUgTGnCkVkiZiqFe7MjDC5qV5%2B1Cbn4NU88dJpYCKY6Fd8YRUemiOj0qySFm5aTiGWyuXyhSWJX65UIVSc%2Bn07EazVa7TOUymM1uw1GQToAi3W5X8xaw7iZzzoKs212OZBVIZ6CMl9u90ezxzR7vnx%2BfwBQQboLfEKxKAma54URIkSWPTZ0UxfgJlxfFE1Anw6RPak1iQ6l3jpFlzlgzkuyLdIQH5FB5SwYxRXI0jJRAaViPtYi6DQENdWYpjWJY9jhXDOj5S6Di%2BLYgT%2BKta0uPzaNUAbRMq0zOM%2BECVMuHTBTGGzasNELHkFNccSUEk2h%2FG8NS%2FCTeSjKbCItM0NszILPDNNJTIcjyAoihRWRSjHCcUDOdz%2BiaFpCDaVBugMFdBjXMYUG6CYBBnfo93PDpGLvU8dgPWErxJTc0DQfZQUGB8ng3eJXyGd9%2FkBYLSvBKC9FRYCMQQ7y70grCOgEBs6Xg6lZCQzLEPxJq80w%2F86BqHDbJSezZCI8gPUSOgqJoygQDlbU6DdT0NQ2gMRU2vaAx2rbdtdbAjvW%2Fb1UOnEw1tKgNB02MuGkkxRDkusZMU5saXzVTc1eybu15T7tPcYJK0MkGTI%2BzwlJ%2B0s%2FpfRtAfwhz%2B2codll82ZPOqbzsYYfz5z0HywqGEZIu6GodxAUoEoPeJZBPM8GZS6kYqZzYCugR8XkVD4yt%2BCqgk5sF3za0XIKayXEQljkCS4aX5eQ69esGnr5blsl8Q0nsZoFMVDYWsUlplVaBUupjzqE622NtjjbojRNHoBl781rEWAbhz6VOs%2F78114tPBd5G3Zrd6gmuUtvdbWIvU7Kae32RyBxcg8CdxnMQobWcAqC9qMDzUpwopjcBAmDbdwWBnulF1LEucG4msMfQJjyrm7h5orn3AsWhc%2FRkBZqtq6DodgGvpElG4ntqMEbrrCQ17WKRVrLlepYbmVGwwMJ1uy9ZwWb5tIw3DFN2jzfo51r%2BNS2bev30zmNM4TvNB27sv%2BUH8NJ%2FTqEy144HR%2Fs%2FV%2BTpgwsUdvdLgIcpKQ1dhHZSDAY6%2FWsgYEs6l968jWKWHSqJw78Chh7VAUd9JIO%2BlDVSaCE5AxbKtdGg5XKkg8sQCoeMGJxVmETQK7RGYExLuuYKFc1h02rssKhTcWZiLZtefQNR273i7k%2BXSQFNi%2Fg%2FJVAC1Vxb%2FleC1EC7M9EYlnhNbqqtlb9R%2Bmha888t7QWuHSQOPhZoUWcIkNA58VpygYutZKe1jTJW8a6Mivj1T%2BJ8eEoJhoAkhI2sEi6YSlSiS8bxEUKSxRoHZKk1xaSGLsk6M4EUGTDQ5JKQU9JmSxS8XyVEvJOSilZMSR%2FLx9Tyl%2F0KXklpR1cltNae0mpPTundKAUMq6%2FTQwiQ%2Fs7MGT03oEPgcmT2%2BZkFZj9kjRMjj0DBzBnpYyYdSFEJsss0hiM8ylg2bIFOGNGGdA4WUFh448aGH2LnYmukc79H4ZFK404q77j2EjZmaVljTwsbXGCd5uYPG7nEHoWj%2B4aPeD%2BQWtV0AgoYFLak8jWr%2FhqLvCkpiSRqxXhY1C6trGax0Z1PeidgaHwoOtE%2BLiPHcXiT%2Fb0rKAGOnmt0Z%2B7LImcr5eMiMa0Blcp6etMVADNqANGQK5igCkn0tFYK2VgYVUXUOpK1VrFIFiW2fMxBByfZkIskZX2sRjXnK2eWCGczQ4IMOeQ2OlkrV0KcgwhmSNmGsOxAIHotyuH5yMHQVExdyYCKSj0MevzErxG%2FIcSRF4m6Yp8qLSFvM6pwvUS8LNI8X6GMnhJAtbV4gmMXmY5elJC2WLJSSfYI1%2BBnFJbhGlTilUiiNp2xaUozZeLvoJAd%2F9%2BK3SorYCAphEALibY3JA3AAAK5QljtH0NaIAAA%3D) then choose on of the tracks of the sample song and click on the
"Export" button on the top right of the application. You will then get a JSON description of the instrument used for the
selected track.

With that instrument, we will be able to create a `SoundGenerator` object:

    var soundGen = new sonantx.SoundGenerator(jsonInstrument);

Then it depends if you prefer to use the Web Audio API or the HTML5 `Audio` class.

#### Web Audio API

    soundGen.createAudioBuffer(function(buffer) {
        var source = audioCtx.createBufferSource();
        source.buffer = buffer;
        source.connect(audioCtx.destination);
        source.start();
    });

Note that the `buffer` object can be stored and re-used any number of times.

#### Audio Class

    soundGen.createAudio(function(audio) {
        audio.play();
    });

Note that, like all `Audio` objects, this one is not re-usable. If you want to be able to re-create `Audio` objects with
minimum delay, you can use the following syntax:

    soundGen.getAudioGenerator(function(audioGenerator) {
        var audio = audioGenerator.getAudio();
        audio.play();
    });

Here the `audioGenerator` can be used to create any number of `Audio` instances without the need to re-calculate the
whole sound. Remember that, even if the sound is not re-calculated, each creation of an HTML5 `Audio` object provoke an
impossible to avoid delay in most browsers. It can be as short as 0.1 second but it's still a burden for applications
like video games. This is why using the Web Audio API is recommended.

